[gd_scene load_steps=28 format=3 uid="uid://bwsp7vquh6lk0"]

[ext_resource type="Texture2D" uid="uid://cbmsbce03orc" path="res://assets/floor.png" id="1_7bipk"]
[ext_resource type="Script" uid="uid://g76tslkdt8th" path="res://scenes/washer_machine/washer_machine.gd" id="1_prn1a"]
[ext_resource type="Texture2D" uid="uid://byuffadntak7v" path="res://assets/floor_height.png" id="2_n7fbi"]
[ext_resource type="Texture2D" uid="uid://dvypmtb7dj5w7" path="res://assets/floor_normal.png" id="3_prn1a"]
[ext_resource type="AudioStream" uid="uid://door28hso3ibo" path="res://assets/audio/bubble.wav" id="5_pl2q2"]

[sub_resource type="BoxShape3D" id="BoxShape3D_pl2q2"]
size = Vector3(0.546631, 0.382324, 0.519531)

[sub_resource type="BoxShape3D" id="BoxShape3D_prn1a"]
size = Vector3(1.35132, 2.31464, 1.27734)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_pl2q2"]
albedo_color = Color(0.7968, 0.825573, 0.83, 1)
albedo_texture = ExtResource("1_7bipk")
metallic = 0.2
roughness = 0.38
normal_enabled = true
normal_scale = 0.35
normal_texture = ExtResource("3_prn1a")
heightmap_enabled = true
heightmap_texture = ExtResource("2_n7fbi")
uv1_scale = Vector3(0.845, 0.845, 0.845)
uv1_triplanar = true

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_7bipk"]
transparency = 1
diffuse_mode = 3
specular_mode = 1
albedo_color = Color(0.53, 0.874667, 1, 0.729412)
metallic = 0.52
roughness = 0.63
rim_enabled = true
anisotropy = -0.01

[sub_resource type="SphereMesh" id="SphereMesh_a8gkp"]
material = SubResource("StandardMaterial3D_7bipk")
radius = 0.1
height = 0.2
radial_segments = 5
rings = 3

[sub_resource type="Curve" id="Curve_7bipk"]
_data = [Vector2(0, 0.995635), 0.0, 0.0, 0, 0, Vector2(0.787611, 0.775281), -1.70067, -1.70067, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_n7fbi"]
transparency = 1
diffuse_mode = 3
specular_mode = 1
albedo_color = Color(0.4, 0.98, 1, 0.407843)
roughness = 0.33

[sub_resource type="PlaneMesh" id="PlaneMesh_7bipk"]
material = SubResource("StandardMaterial3D_n7fbi")
size = Vector2(1.925, 1.935)
subdivide_width = 4
subdivide_depth = 4

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_prn1a"]
diffuse_mode = 3
specular_mode = 1
albedo_color = Color(0.36, 0.31446, 0.2412, 1)
albedo_texture = ExtResource("1_7bipk")
uv1_triplanar = true

[sub_resource type="BoxMesh" id="BoxMesh_pl2q2"]
size = Vector3(8.14, 0.175, 0.11)

[sub_resource type="BoxMesh" id="BoxMesh_uf63r"]
size = Vector3(0.805, 0.235, 1.665)

[sub_resource type="Animation" id="Animation_pl2q2"]
length = 0.001
tracks/0/type = "scale_3d"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Mesh")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = PackedFloat32Array(0, 1, 1, 1, 1)
tracks/1/type = "audio"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("BubblePlayer")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"clips": [{
"end_offset": 0.0,
"start_offset": 0.0,
"stream": null
}],
"times": PackedFloat32Array(0)
}
tracks/1/use_blend = true

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_uf63r"]
random_pitch = 1.45
random_volume_offset_db = 0.35
streams_count = 1
stream_0/stream = ExtResource("5_pl2q2")

[sub_resource type="Animation" id="Animation_prn1a"]
resource_name = "wash_eat"
length = 0.234
loop_mode = 1
tracks/0/type = "scale_3d"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Mesh")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = PackedFloat32Array(0, 1, 1, 1, 1, 0.1, 1, 1.3, 1.3, 1.3, 0.133333, 1, 1.3, 1.5, 1.5, 0.233333, 1, 1, 1, 1)
tracks/1/type = "audio"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("BubblePlayer")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"clips": [{
"end_offset": 0.0,
"start_offset": 0.0,
"stream": SubResource("AudioStreamRandomizer_uf63r")
}],
"times": PackedFloat32Array(0)
}
tracks/1/use_blend = true

[sub_resource type="Animation" id="Animation_uf63r"]
resource_name = "wash_idle"
length = 2.0
loop_mode = 1
tracks/0/type = "scale_3d"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Mesh")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = PackedFloat32Array(0, 1, 1, 1, 1, 0.1, 1, 1.3, 1.3, 1.3, 0.2, 1, 1, 1, 1, 0.3, 1, 1, 1, 1, 2, 1, 1, 1, 1)
tracks/1/type = "audio"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("BubblePlayer")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"clips": [{
"end_offset": 0.0,
"start_offset": 0.0,
"stream": null
}],
"times": PackedFloat32Array(0)
}
tracks/1/use_blend = true

[sub_resource type="AnimationLibrary" id="AnimationLibrary_uf63r"]
_data = {
&"RESET": SubResource("Animation_pl2q2"),
&"wash_eat": SubResource("Animation_prn1a"),
&"wash_idle": SubResource("Animation_uf63r")
}

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_prn1a"]
animation = &"wash_eat"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_pl2q2"]
animation = &"wash_idle"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_uf63r"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_rdqgw"]
advance_mode = 2
advance_condition = &"eat"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_w2hmw"]
advance_mode = 2
advance_condition = &"idle"

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_32yj6"]
states/Start/position = Vector2(144, 100)
states/wash_eat/node = SubResource("AnimationNodeAnimation_prn1a")
states/wash_eat/position = Vector2(430, 56)
states/wash_idle/node = SubResource("AnimationNodeAnimation_pl2q2")
states/wash_idle/position = Vector2(338, 144)
transitions = ["Start", "wash_idle", SubResource("AnimationNodeStateMachineTransition_uf63r"), "wash_idle", "wash_eat", SubResource("AnimationNodeStateMachineTransition_rdqgw"), "wash_eat", "wash_idle", SubResource("AnimationNodeStateMachineTransition_w2hmw")]

[node name="WasherMachine" type="Area3D"]
collision_layer = 7
collision_mask = 7
script = ExtResource("1_prn1a")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(3.99994, 0, 0.0225495, 0, 4, 0, -0.0225495, 0, 3.99994, 0.00628263, 0.57341, 0.00185981)
shape = SubResource("BoxShape3D_pl2q2")
debug_color = Color(0.882456, 0.171498, 0.709839, 0.42)

[node name="CleaningTimer" type="Timer" parent="."]
one_shot = true

[node name="StaticBody3D" type="StaticBody3D" parent="."]

[node name="CollisionShape3D" type="CollisionShape3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.12233, 0.0250244)
shape = SubResource("BoxShape3D_prn1a")

[node name="ItemHolder" type="Marker3D" parent="."]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.780118, 0)

[node name="Mesh" type="Node3D" parent="."]

[node name="CSGBox3D" type="CSGBox3D" parent="Mesh"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.610694, 0)
material_override = SubResource("StandardMaterial3D_pl2q2")
size = Vector3(2.03125, 1.22711, 1.97461)

[node name="CSGCylinder3D" type="CSGCylinder3D" parent="Mesh/CSGBox3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.446411, 0)
operation = 2
radius = 0.922363
height = 0.922607

[node name="WashParticles" type="CPUParticles3D" parent="Mesh"]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.09914, 0)
emitting = false
amount = 16
lifetime = 0.98
randomness = 0.45
lifetime_randomness = 0.5
local_coords = true
mesh = SubResource("SphereMesh_a8gkp")
emission_shape = 6
emission_ring_axis = Vector3(0, 36.645, 1)
emission_ring_height = 0.1
emission_ring_radius = 0.88
emission_ring_inner_radius = 0.0
emission_ring_cone_angle = 90.0
direction = Vector3(0, 1, 0)
spread = 75.93
gravity = Vector3(0, 0, 0)
initial_velocity_min = 7.05
initial_velocity_max = 7.05
angular_velocity_min = -407.82
angular_velocity_max = 443.05
radial_accel_min = -0.3
radial_accel_max = 0.45
damping_min = 4.815
damping_max = 4.815
angle_min = -195.0
angle_max = 274.0
scale_amount_min = 3.45
scale_amount_max = 4.45
scale_amount_curve = SubResource("Curve_7bipk")

[node name="BubbleParticles" type="CPUParticles3D" parent="Mesh"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.02422, 0)
amount = 16
lifetime = 2.03
randomness = 0.45
lifetime_randomness = 0.5
mesh = SubResource("SphereMesh_a8gkp")
emission_shape = 6
emission_ring_axis = Vector3(0, 36.645, 1)
emission_ring_height = 0.1
emission_ring_radius = 0.88
emission_ring_inner_radius = 0.0
emission_ring_cone_angle = 90.0
direction = Vector3(0, 1, 0)
spread = 2.8
gravity = Vector3(0, 0, 0)
initial_velocity_max = 0.92
angular_velocity_min = -407.82
angular_velocity_max = 443.05
radial_accel_min = -0.3
radial_accel_max = 0.45
damping_min = 0.665
damping_max = 0.665
angle_min = -195.0
angle_max = 274.0
scale_amount_min = 0.5
scale_amount_max = 2.15
scale_amount_curve = SubResource("Curve_7bipk")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Mesh"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.982665, 0)
mesh = SubResource("PlaneMesh_7bipk")
skeleton = NodePath("../..")

[node name="WasherSign" type="Node3D" parent="Mesh"]
transform = Transform3D(0.372011, 0.0844431, -0.92438, -0.0315263, 0.996428, 0.0783373, 0.927693, 0, 0.373344, -1.53806, -0.643758, -2.6987)

[node name="MeshInstance3D4" type="MeshInstance3D" parent="Mesh/WasherSign"]
transform = Transform3D(0.0356361, 0.589718, 0.806822, 0.999026, -4.37114e-08, -0.0441254, -0.0260215, 0.807609, -0.589143, 2.87115, -1.11038, -1.75703)
material_override = SubResource("StandardMaterial3D_prn1a")
mesh = SubResource("BoxMesh_pl2q2")
skeleton = NodePath("../../..")

[node name="MeshInstance3D6" type="MeshInstance3D" parent="Mesh/WasherSign"]
transform = Transform3D(-0.0176197, 0.152984, 0.988071, 0.999109, 0.0406027, 0.0115299, -0.0383545, 0.987394, -0.153563, 3.09185, 3.28176, -1.98206)
material_override = SubResource("StandardMaterial3D_prn1a")
mesh = SubResource("BoxMesh_uf63r")
skeleton = NodePath("../../..")

[node name="Label3D" type="Label3D" parent="Mesh/WasherSign"]
transform = Transform3D(0.988352, -0.0265579, 0.14985, 0.00800454, 0.992364, 0.123082, -0.151975, -0.120449, 0.981018, 3.10425, 3.31261, -1.83389)
texture_filter = 0
modulate = Color(0.407392, 0.83, 0.2905, 1)
text = "WASH DIRTY
DISHES"
font_size = 48

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_uf63r")
}

[node name="AnimationTree" type="AnimationTree" parent="."]
tree_root = SubResource("AnimationNodeStateMachine_32yj6")
anim_player = NodePath("../AnimationPlayer")
parameters/conditions/eat = false
parameters/conditions/idle = true

[node name="BubblePlayer" type="AudioStreamPlayer2D" parent="."]
bus = &"SFX"

[connection signal="timeout" from="CleaningTimer" to="." method="_on_cleaning_timer_timeout"]
